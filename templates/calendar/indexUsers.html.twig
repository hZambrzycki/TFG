{% apply inline_css %}
    <html>
    
        <head>
            <style>
            
     @import url('https://fonts.googleapis.com/css2?family=Concert+One&family=Roboto+Slab&display=swap');


#nombre{
  color:#051538;
  font-style: bold;
  font-family: 'Concert One', cursive;
  font-family: 'Roboto Slab', serif;
  font-size: 18px;
}

#prj{
   color: #051538;
  font-style: bold;
  font-family: 'Concert One', cursive;
  font-family: 'Roboto Slab', serif;
   font-size: 18px;
}

#hours{
  color: #051538;
  font-style: bold;
  font-family: 'Concert One', cursive;
  font-family: 'Roboto Slab', serif;
   font-size: 18px;
}

#titulo{
  color:#234266;
  font-style: bold;
  font-family: 'Concert One', cursive;
  font-family: 'Roboto Slab', serif;
}

#modal{
background: rgba(169, 236, 233, 0.2);
border-radius: 16px;
box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
backdrop-filter: blur(5px);
-webkit-backdrop-filter: blur(5px);
border: 1px solid rgba(169, 236, 233, 0.3);
}

#modalcons{

background: rgba(211, 70, 21, 0.2);
border-radius: 16px;
box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
backdrop-filter: blur(5px);
-webkit-backdrop-filter: blur(5px);
border: 1px solid rgba(211, 70, 21, 0.3);
}

#modalsave{
 background: rgba(18, 111, 228, 0.57);
border-radius: 16px;
box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
backdrop-filter: blur(5.6px);
-webkit-backdrop-filter: blur(5.6px);
border: 1px solid rgba(18, 111, 228, 0.24);
 color:white;
  font-style: bold;
  font-family: 'Concert One', cursive;
  font-family: 'Roboto Slab', serif;
   font-size: 15px;
}

#modalclose{
  background: rgba(200, 228, 18, 0.57);
border-radius: 16px;
box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
backdrop-filter: blur(5.6px);
-webkit-backdrop-filter: blur(5.6px);
border: 1px solid rgba(200, 228, 18, 0.24);
 color:white;
  font-style: bold;
  font-family: 'Concert One', cursive;
  font-family: 'Roboto Slab', serif;
   font-size: 15px;
  
}

#modalask{
  background: rgba(228, 18, 31, 0.57);
border-radius: 16px;
box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
backdrop-filter: blur(5.6px);
-webkit-backdrop-filter: blur(5.6px);
border: 1px solid rgba(228, 18, 31, 0.24);
}

  #calendar{
 background: rgba(16, 220, 238, 0.14);
    border-radius: 16px;
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    border: 1px solid rgba(16, 220, 238, 0.38);
    max-width: 80%;
    margin: auto;
    color:white;


}
 #options{
            
            text-align:left;
            width: 40%;
        }
 body{
    background: url("https://i.pinimg.com/originals/3c/24/46/3c24462450c2a902bf7e18f3d9aada81.jpg") no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
 }

 @media screen and (max-width: 540px) {
   #calendar{
 background: rgba(16, 220, 238, 0.14);
    border-radius: 16px;
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    border: 1px solid rgba(16, 220, 238, 0.38);
    max-width: 80%;
    margin: auto;
    color:white;


}
}
@media screen and (min-width: 540px) and (max-width: 9900px) {
      #calendar{
 background: rgba(16, 220, 238, 0.14);
    border-radius: 16px;
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    border: 1px solid rgba(16, 220, 238, 0.38);
    max-width: 80%;
    margin: auto;
    color:white;


}
}
@media screen and (min-width: 780px) {
      #calendar{
 background: rgba(16, 220, 238, 0.14);
    border-radius: 16px;
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    border: 1px solid rgba(16, 220, 238, 0.38);
    max-width: 80%;
    margin: auto;
    color:white;


}
}
         </style>
        </head>
    <body>
    </body>
    </html>
{% endapply %}


{% block stylesheets %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fullcalendar/core@4.1.0/main.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@4.1.0/main.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fullcalendar/timegrid@4.1.0/main.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' rel='stylesheet'>
<link href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css' rel='stylesheet'>
<link href='https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.css' rel='stylesheet'>
<link href='https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.1/css/all.css' rel='stylesheet'>
{% endblock %}
{% block body %}
<div class="container">
<div id='calendar'></div>
</div>
<div class="modal fade" id="success-modal" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content"  id="modal">
      <div class="modal-header success-modal">
      
        <h4 class="modal-title" id="titulo">Asignar Horas al Proyecto</h4>
      </div>
      <div class="modal-body">
         <form name="hours_form" method="post">
          <div class="form-group">
          <label for="hours_form_projectName" class="required" id="prj">Project name</label>
          <select id="modal" name="hours_form[projectName]"><option value={{form_widget(hoursForm.projectName) }}></option></select>
      
        <br>
          <label for="hours_form_nameConsultant" class="required" id="nombre">Consultant</label>
          <select  id="modal" name="hours_form[nameConsultant]"><option value={{form_widget(hoursForm.nameConsultant)}}></option></select>
          <br>
          <label for="hours_form_nHours" id="hours" class="required">Number of hours</label>
          <input type="number" id="modal" name="hours_form[nHours]" required="required" min="1" max="8" />
    <br>
          </div>
       
    
        {{form_row(hoursForm._token) }}

    {% if bool == true %}
          {% if (horasT == 1) %} 
                         <button type="submit" value="submit" id="modalsave" name="submit" class="btn btn-success float-button-light" >SAVE</button>
             <button type="submit" value="Ask For Extra Hours" id="modalask" name="askForExtraHours" class="btn btn-danger float-button-red"  disabled><a href="{{path ('app_extra_hours')}}">ASK FOR EXTRA HOURS</a></button>
          {% endif %}
          {% if (horasT == 0) %} 
                         <button type="submit" value="submit" id="modalsave" name="submit" class="btn btn-success float-button-light" disabled >SAVE</button>
             <button type="submit" value="Ask For Extra Hours" id="modalask" name="askForExtraHours" class="btn btn-danger float-button-red"  ><a href="{{path ('app_extra_hours')}}">ASK FOR EXTRA HOURS</a></button>
          {% endif %}
    {% endif %}
            {% if bool == false %}
             <button type="submit" value="submit" id="submit" name="submit" class="btn btn-success float-button-light" >SAVE</button>
             <button type="submit" value="Ask For Extra Hours" name="askForExtraHours" class="btn btn-danger float-button-red" disabled>ASK FOR EXTRA HOURS</button>
          {% endif %}
      
          <button type="button" class="btn btn-warning" id="modalclose" data-dismiss="modal" aria- label="Close">ClOSE</button>
       </form>
      </div>
    </div>
  </div>
</div>

{% endblock %}
 
{% block javascripts %}
  <script
      src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"
      integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
<script src="https://fullcalendar.io/releases/core/4.1.0/main.min.js"></script>
<script src="https://fullcalendar.io/releases/interaction/4.1.0/main.min.js"></script>
<script src="https://fullcalendar.io/releases/daygrid/4.1.0/main.min.js"></script>
<script src="https://fullcalendar.io/releases/timegrid/4.1.0/main.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="https://unpkg.com/@fullcalendar/interaction@4.4.0/main.min.js"></script>
<script src="https://jakubroztocil.github.io/rrule/dist/es5/rrule.min.js"></script>

<script type="text/javascript">
        var x= JSON.parse('{{ dataWeeksStart|raw}}');
        var y = JSON.parse('{{ dataWeeksEnd|raw}}');
        var x1 = (JSON.stringify(x));
        var y1 = (JSON.stringify(y));
        var fechaInicio = x1.substring(11,21);
        var fechaFinal =  y1.substring(9,19);
    
        $time = new Date();
        $timeF = $time.toISOString().split('T')[0];
   
        document.addEventListener('DOMContentLoaded', () => {
            var calendarEl = document.getElementById('calendar');
            

            var calendar = new FullCalendar.Calendar(calendarEl, {
                header: {
                    left: 'prev,next today ',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay',
                },
            eventRender: function(info) {
            $(info.el).tooltip({
            title: " Project          " + info.event.title + "\n\n\n\n" +
             " Username " + info.event.extendedProps.description + " and the date is " + info.event.start,
            placement: 'top',
            trigger: 'hover',
            container: 'body'
            });
            },
            events:
            {{data|raw}}
          
            ,
            weekends: false,
            plugins: [ 'interaction', 'dayGrid', 'timeGrid'],
            timeZone: 'UTC',
            defaultView: 'dayGridMonth',
            editable: true,
            selectable:true,
            selectHelper: true,
             eventColor: '#2CB05B',
            eventLimit: true, // allow "more" link when too many events
            views: {
             month: {
             eventLimit: 2

             }
            },
            validRange: {
            start: fechaInicio, 
            
            end: fechaFinal,
            },
            displayEventTime: false,
            dateClick: function(info) {
            $("#success-modal").modal("toggle");
            
            },
            select: function(info) {
            $("#success-modal").modal("toggle");
              
               $(document).ready(function () {
               createCookie("gfg", info.startStr, "10");
               createCookie("gfg1", info.endStr, "10");
               });
            }, 
            });
            calendar.render();
            });
            function createCookie(name, value, days) {
            var expires;
      
            if (days) {
             var date = new Date();
             date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
             expires = "; expires=" + date.toGMTString();
            }
             else {
            expires = "";
            }
      
    document.cookie = escape(name) + "=" + 
        escape(value) + expires + "; path=/";
}
    </script>
{% endblock %}